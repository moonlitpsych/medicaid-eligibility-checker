<template>
  <div class="space-y-8">
    <!-- Case Manager Header -->\n    <div class=\"bg-white rounded-2xl shadow-xl p-6\">\n      <div class=\"flex items-center justify-between mb-6\">\n        <div>\n          <h3 class=\"text-xl font-semibold text-slate-800\">Case Manager Portal</h3>\n          <p class=\"text-slate-600\">Manage eligibility verification and coordinate patient care</p>\n        </div>\n        <div class=\"flex items-center space-x-4\">\n          <div class=\"text-right\">\n            <div class=\"text-sm text-slate-600\">Active Cases</div>\n            <div class=\"text-2xl font-bold text-[#BF9C73]\">{{ activeCases.length }}</div>\n          </div>\n          <button \n            @click=\"showAddPatient = true\"\n            class=\"px-4 py-2 bg-[#BF9C73] text-white font-medium rounded-lg hover:bg-[#A8875F] transition-colors\"\n          >\n            + Add Patient\n          </button>\n        </div>\n      </div>\n\n      <!-- Quick Stats -->\n      <div class=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div class=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n          <div class=\"text-sm text-green-700 font-medium\">Verified Coverage</div>\n          <div class=\"text-2xl font-bold text-green-900\">{{ verifiedCount }}</div>\n        </div>\n        <div class=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n          <div class=\"text-sm text-yellow-700 font-medium\">Pending Verification</div>\n          <div class=\"text-2xl font-bold text-yellow-900\">{{ pendingCount }}</div>\n        </div>\n        <div class=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n          <div class=\"text-sm text-blue-700 font-medium\">Upcoming Appointments</div>\n          <div class=\"text-2xl font-bold text-blue-900\">{{ upcomingAppointments }}</div>\n        </div>\n        <div class=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n          <div class=\"text-sm text-purple-700 font-medium\">This Week</div>\n          <div class=\"text-2xl font-bold text-purple-900\">{{ weeklyActivity }}</div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Quick Actions Panel -->\n    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n      <!-- Quick Eligibility Check -->\n      <div class=\"bg-white rounded-2xl shadow-xl p-6\">\n        <h4 class=\"text-lg font-semibold text-slate-800 mb-4\">Quick Eligibility Check</h4>\n        <form @submit.prevent=\"performQuickCheck\" class=\"space-y-4\">\n          <div class=\"grid grid-cols-2 gap-4\">\n            <input\n              v-model=\"quickCheck.firstName\"\n              type=\"text\"\n              placeholder=\"First Name\"\n              class=\"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#BF9C73] focus:border-[#BF9C73]\"\n              required\n            >\n            <input\n              v-model=\"quickCheck.lastName\"\n              type=\"text\"\n              placeholder=\"Last Name\"\n              class=\"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#BF9C73] focus:border-[#BF9C73]\"\n              required\n            >\n          </div>\n          <input\n            v-model=\"quickCheck.dob\"\n            type=\"date\"\n            class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#BF9C73] focus:border-[#BF9C73]\"\n            required\n          >\n          <input\n            v-model=\"quickCheck.medicaidId\"\n            type=\"text\"\n            placeholder=\"Medicaid ID (optional)\"\n            class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#BF9C73] focus:border-[#BF9C73]\"\n          >\n          <button\n            type=\"submit\"\n            :disabled=\"quickCheckLoading\"\n            class=\"w-full px-4 py-3 bg-[#BF9C73] text-white font-medium rounded-lg hover:bg-[#A8875F] transition-colors disabled:opacity-50\"\n          >\n            {{ quickCheckLoading ? 'Checking...' : 'Check Eligibility' }}\n          </button>\n        </form>\n        \n        <!-- Quick Check Result -->\n        <div v-if=\"quickCheckResult\" class=\"mt-4 p-4 rounded-lg\" :class=\"[\n          quickCheckResult.enrolled ? 'bg-green-50 border border-green-200' : 'bg-orange-50 border border-orange-200'\n        ]\">\n          <div class=\"flex items-center space-x-2 mb-2\">\n            <div v-if=\"quickCheckResult.enrolled\" class=\"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center\">\n              <svg class=\"w-3 h-3 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" />\n              </svg>\n            </div>\n            <div v-else class=\"w-5 h-5 bg-orange-500 rounded-full flex items-center justify-center\">\n              <svg class=\"w-3 h-3 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\" />\n              </svg>\n            </div>\n            <span class=\"font-medium\" :class=\"quickCheckResult.enrolled ? 'text-green-800' : 'text-orange-800'\">\n              {{ quickCheckResult.enrolled ? 'Coverage Verified' : 'No Active Coverage' }}\n            </span>\n          </div>\n          <p class=\"text-sm\" :class=\"quickCheckResult.enrolled ? 'text-green-700' : 'text-orange-700'\">\n            {{ quickCheckResult.program || quickCheckResult.error || 'Check completed' }}\n          </p>\n          <button \n            v-if=\"quickCheckResult.enrolled\"\n            @click=\"addToCase(quickCheckResult)\"\n            class=\"mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium\"\n          >\n            + Add to My Cases\n          </button>\n        </div>\n      </div>\n\n      <!-- Bulk Upload/Processing -->\n      <div class=\"bg-white rounded-2xl shadow-xl p-6\">\n        <h4 class=\"text-lg font-semibold text-slate-800 mb-4\">Bulk Processing</h4>\n        <div class=\"space-y-4\">\n          <div class=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\">\n            <input\n              type=\"file\"\n              ref=\"fileInput\"\n              @change=\"handleFileUpload\"\n              accept=\".csv,.xlsx,.xls\"\n              class=\"hidden\"\n            >\n            <svg class=\"mx-auto h-12 w-12 text-gray-400\" stroke=\"currentColor\" fill=\"none\" viewBox=\"0 0 48 48\">\n              <path d=\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n            </svg>\n            <div class=\"mt-4\">\n              <button \n                @click=\"$refs.fileInput.click()\"\n                class=\"text-[#BF9C73] hover:text-[#A8875F] font-medium\"\n              >\n                Upload patient list (CSV/Excel)\n              </button>\n            </div>\n            <p class=\"text-xs text-gray-500 mt-1\">Max file size: 10MB</p>\n          </div>\n          \n          <div v-if=\"uploadedFile\" class=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <div class=\"flex items-center justify-between\">\n              <div class=\"flex items-center space-x-2\">\n                <svg class=\"w-5 h-5 text-blue-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fill-rule=\"evenodd\" d=\"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\" clip-rule=\"evenodd\" />\n                </svg>\n                <span class=\"text-sm font-medium text-blue-800\">{{ uploadedFile.name }}</span>\n              </div>\n              <button \n                @click=\"processBulkFile\"\n                :disabled=\"bulkProcessing\"\n                class=\"px-3 py-1 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 disabled:opacity-50\"\n              >\n                {{ bulkProcessing ? 'Processing...' : 'Process' }}\n              </button>\n            </div>\n          </div>\n\n          <!-- Sample Format Guide -->\n          <div class=\"text-xs text-gray-600\">\n            <strong>CSV Format:</strong> First Name, Last Name, DOB (YYYY-MM-DD), Medicaid ID\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Active Cases Management -->\n    <div class=\"bg-white rounded-2xl shadow-xl\">\n      <div class=\"p-6 border-b border-gray-200\">\n        <div class=\"flex items-center justify-between\">\n          <h4 class=\"text-lg font-semibold text-slate-800\">Active Cases</h4>\n          <div class=\"flex items-center space-x-2\">\n            <input\n              v-model=\"searchQuery\"\n              type=\"text\"\n              placeholder=\"Search cases...\"\n              class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#BF9C73] focus:border-[#BF9C73]\"\n            >\n            <select \n              v-model=\"statusFilter\"\n              class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#BF9C73] focus:border-[#BF9C73]\"\n            >\n              <option value=\"\">All Status</option>\n              <option value=\"verified\">Verified</option>\n              <option value=\"pending\">Pending</option>\n              <option value=\"appointment-scheduled\">Scheduled</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <!-- Cases Table -->\n      <div class=\"overflow-x-auto\">\n        <table class=\"w-full\">\n          <thead class=\"bg-gray-50\">\n            <tr>\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Patient</th>\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Insurance</th>\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Last Updated</th>\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n            </tr>\n          </thead>\n          <tbody class=\"bg-white divide-y divide-gray-200\">\n            <tr v-for=\"case_ in filteredCases\" :key=\"case_.id\" class=\"hover:bg-gray-50\">\n              <td class=\"px-6 py-4 whitespace-nowrap\">\n                <div class=\"flex items-center\">\n                  <div class=\"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center\">\n                    <span class=\"text-sm font-medium text-gray-700\">{{ case_.initials }}</span>\n                  </div>\n                  <div class=\"ml-4\">\n                    <div class=\"text-sm font-medium text-gray-900\">{{ case_.name }}</div>\n                    <div class=\"text-sm text-gray-500\">DOB: {{ case_.dob }}</div>\n                  </div>\n                </div>\n              </td>\n              <td class=\"px-6 py-4 whitespace-nowrap\">\n                <span :class=\"[\n                  'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium',\n                  case_.status === 'verified' ? 'bg-green-100 text-green-800' :\n                  case_.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                  case_.status === 'appointment-scheduled' ? 'bg-blue-100 text-blue-800' :\n                  'bg-gray-100 text-gray-800'\n                ]\">\n                  {{ case_.status === 'verified' ? '‚úÖ Verified' :\n                     case_.status === 'pending' ? '‚è≥ Pending' :\n                     case_.status === 'appointment-scheduled' ? 'üìÖ Scheduled' :\n                     '‚ùì Unknown' }}\n                </span>\n              </td>\n              <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                {{ case_.insurance }}\n              </td>\n              <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                {{ case_.lastUpdated }}\n              </td>\n              <td class=\"px-6 py-4 whitespace-nowrap text-sm space-x-2\">\n                <button \n                  @click=\"viewCase(case_)\"\n                  class=\"text-blue-600 hover:text-blue-800 font-medium\"\n                >\n                  View\n                </button>\n                <button \n                  v-if=\"case_.status === 'verified'\"\n                  @click=\"scheduleAppointment(case_)\"\n                  class=\"text-green-600 hover:text-green-800 font-medium\"\n                >\n                  Schedule\n                </button>\n                <button \n                  v-else\n                  @click=\"recheckEligibility(case_)\"\n                  class=\"text-orange-600 hover:text-orange-800 font-medium\"\n                >\n                  Re-check\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n\n    <!-- Add Patient Modal -->\n    <div v-if=\"showAddPatient\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div class=\"bg-white rounded-2xl p-8 max-w-md w-full mx-4\">\n        <h3 class=\"text-xl font-semibold text-slate-800 mb-4\">Add New Patient</h3>\n        <form @submit.prevent=\"addNewPatient\" class=\"space-y-4\">\n          <input\n            v-model=\"newPatient.firstName\"\n            type=\"text\"\n            placeholder=\"First Name\"\n            class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#BF9C73] focus:border-[#BF9C73]\"\n            required\n          >\n          <input\n            v-model=\"newPatient.lastName\"\n            type=\"text\"\n            placeholder=\"Last Name\"\n            class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#BF9C73] focus:border-[#BF9C73]\"\n            required\n          >\n          <input\n            v-model=\"newPatient.dob\"\n            type=\"date\"\n            class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#BF9C73] focus:border-[#BF9C73]\"\n            required\n          >\n          <input\n            v-model=\"newPatient.medicaidId\"\n            type=\"text\"\n            placeholder=\"Medicaid ID\"\n            class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#BF9C73] focus:border-[#BF9C73]\"\n          >\n          <input\n            v-model=\"newPatient.phone\"\n            type=\"tel\"\n            placeholder=\"Phone Number\"\n            class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#BF9C73] focus:border-[#BF9C73]\"\n          >\n          <textarea\n            v-model=\"newPatient.notes\"\n            placeholder=\"Case notes...\"\n            rows=\"3\"\n            class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#BF9C73] focus:border-[#BF9C73]\"\n          ></textarea>\n          \n          <div class=\"flex space-x-3\">\n            <button\n              type=\"submit\"\n              class=\"flex-1 px-4 py-3 bg-[#BF9C73] text-white font-medium rounded-lg hover:bg-[#A8875F] transition-colors\"\n            >\n              Add & Check Eligibility\n            </button>\n            <button\n              type=\"button\"\n              @click=\"showAddPatient = false\"\n              class=\"px-4 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              Cancel\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from 'vue'\n\nexport default {\n  name: 'CaseManagerDashboard',\n  emits: ['check-eligibility', 'manage-appointments'],\n  setup(props, { emit }) {\n    const activeCases = ref([\n      {\n        id: 1,\n        name: 'Sarah Johnson',\n        initials: 'SJ',\n        dob: '1985-03-15',\n        status: 'verified',\n        insurance: 'Utah Medicaid',\n        lastUpdated: '2 hours ago',\n        medicaidId: 'UT123456789',\n        phone: '(801) 555-0123',\n        notes: 'Patient referred for anxiety and depression treatment'\n      },\n      {\n        id: 2,\n        name: 'Michael Chen',\n        initials: 'MC',\n        dob: '1992-07-22',\n        status: 'pending',\n        insurance: 'Molina Healthcare',\n        lastUpdated: '1 day ago',\n        medicaidId: 'UT987654321',\n        phone: '(801) 555-0456',\n        notes: 'Follow-up needed for eligibility verification'\n      },\n      {\n        id: 3,\n        name: 'Jennifer Martinez',\n        initials: 'JM',\n        dob: '1978-11-08',\n        status: 'appointment-scheduled',\n        insurance: 'Utah Medicaid',\n        lastUpdated: '3 days ago',\n        medicaidId: 'UT456789123',\n        phone: '(801) 555-0789',\n        notes: 'Initial consultation scheduled for next week'\n      }\n    ])\n\n    const searchQuery = ref('')\n    const statusFilter = ref('')\n    const showAddPatient = ref(false)\n    const uploadedFile = ref(null)\n    const bulkProcessing = ref(false)\n\n    // Quick check form\n    const quickCheck = ref({\n      firstName: '',\n      lastName: '',\n      dob: '',\n      medicaidId: ''\n    })\n    const quickCheckLoading = ref(false)\n    const quickCheckResult = ref(null)\n\n    // New patient form\n    const newPatient = ref({\n      firstName: '',\n      lastName: '',\n      dob: '',\n      medicaidId: '',\n      phone: '',\n      notes: ''\n    })\n\n    // Computed stats\n    const verifiedCount = computed(() => \n      activeCases.value.filter(c => c.status === 'verified').length\n    )\n    const pendingCount = computed(() => \n      activeCases.value.filter(c => c.status === 'pending').length\n    )\n    const upcomingAppointments = computed(() => \n      activeCases.value.filter(c => c.status === 'appointment-scheduled').length\n    )\n    const weeklyActivity = computed(() => activeCases.value.length)\n\n    // Filtered cases for search/filter\n    const filteredCases = computed(() => {\n      let filtered = activeCases.value\n      \n      if (searchQuery.value) {\n        const query = searchQuery.value.toLowerCase()\n        filtered = filtered.filter(c => \n          c.name.toLowerCase().includes(query) ||\n          c.medicaidId.toLowerCase().includes(query)\n        )\n      }\n      \n      if (statusFilter.value) {\n        filtered = filtered.filter(c => c.status === statusFilter.value)\n      }\n      \n      return filtered\n    })\n\n    // Methods\n    const performQuickCheck = async () => {\n      quickCheckLoading.value = true\n      quickCheckResult.value = null\n\n      try {\n        const response = await fetch('/api/medicaid/check', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            first: quickCheck.value.firstName,\n            last: quickCheck.value.lastName,\n            dob: quickCheck.value.dob,\n            medicaidId: quickCheck.value.medicaidId\n          })\n        })\n        \n        const result = await response.json()\n        quickCheckResult.value = result\n        \n        emit('check-eligibility', {\n          type: 'quick-check',\n          patient: quickCheck.value,\n          result\n        })\n        \n      } catch (error) {\n        console.error('Quick eligibility check failed:', error)\n        quickCheckResult.value = {\n          enrolled: false,\n          error: 'Unable to verify eligibility at this time'\n        }\n      } finally {\n        quickCheckLoading.value = false\n      }\n    }\n\n    const addToCase = (result) => {\n      const newCase = {\n        id: Date.now(),\n        name: `${quickCheck.value.firstName} ${quickCheck.value.lastName}`,\n        initials: `${quickCheck.value.firstName[0]}${quickCheck.value.lastName[0]}`,\n        dob: quickCheck.value.dob,\n        status: result.enrolled ? 'verified' : 'pending',\n        insurance: result.program || 'Unknown',\n        lastUpdated: 'Just now',\n        medicaidId: quickCheck.value.medicaidId,\n        phone: '',\n        notes: `Added from quick check - ${result.enrolled ? 'Coverage verified' : 'Coverage not verified'}`\n      }\n      \n      activeCases.value.unshift(newCase)\n      \n      // Reset form\n      quickCheck.value = {\n        firstName: '',\n        lastName: '',\n        dob: '',\n        medicaidId: ''\n      }\n      quickCheckResult.value = null\n    }\n\n    const handleFileUpload = (event) => {\n      const file = event.target.files[0]\n      if (file) {\n        uploadedFile.value = file\n      }\n    }\n\n    const processBulkFile = async () => {\n      if (!uploadedFile.value) return\n      \n      bulkProcessing.value = true\n      \n      try {\n        // Simulate bulk processing\n        await new Promise(resolve => setTimeout(resolve, 3000))\n        \n        // Mock adding processed cases\n        const mockProcessedCases = [\n          {\n            id: Date.now() + 1,\n            name: 'David Wilson',\n            initials: 'DW',\n            dob: '1990-05-12',\n            status: 'verified',\n            insurance: 'Utah Medicaid',\n            lastUpdated: 'Just now',\n            medicaidId: 'UT111222333',\n            phone: '(801) 555-1111',\n            notes: 'Bulk uploaded - coverage verified'\n          },\n          {\n            id: Date.now() + 2,\n            name: 'Lisa Thompson',\n            initials: 'LT',\n            dob: '1987-12-03',\n            status: 'pending',\n            insurance: 'Unknown',\n            lastUpdated: 'Just now',\n            medicaidId: 'UT444555666',\n            phone: '(801) 555-2222',\n            notes: 'Bulk uploaded - needs verification'\n          }\n        ]\n        \n        activeCases.value.unshift(...mockProcessedCases)\n        uploadedFile.value = null\n        \n        alert(`Successfully processed ${mockProcessedCases.length} patients`)\n        \n      } catch (error) {\n        console.error('Bulk processing failed:', error)\n        alert('Bulk processing failed. Please try again.')\n      } finally {\n        bulkProcessing.value = false\n      }\n    }\n\n    const addNewPatient = async () => {\n      // Add patient and immediately check eligibility\n      const response = await fetch('/api/medicaid/check', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          first: newPatient.value.firstName,\n          last: newPatient.value.lastName,\n          dob: newPatient.value.dob,\n          medicaidId: newPatient.value.medicaidId\n        })\n      })\n      \n      const result = await response.json()\n      \n      const caseData = {\n        id: Date.now(),\n        name: `${newPatient.value.firstName} ${newPatient.value.lastName}`,\n        initials: `${newPatient.value.firstName[0]}${newPatient.value.lastName[0]}`,\n        dob: newPatient.value.dob,\n        status: result.enrolled ? 'verified' : 'pending',\n        insurance: result.program || 'Unknown',\n        lastUpdated: 'Just now',\n        medicaidId: newPatient.value.medicaidId,\n        phone: newPatient.value.phone,\n        notes: newPatient.value.notes\n      }\n      \n      activeCases.value.unshift(caseData)\n      \n      // Reset form and close modal\n      newPatient.value = {\n        firstName: '',\n        lastName: '',\n        dob: '',\n        medicaidId: '',\n        phone: '',\n        notes: ''\n      }\n      showAddPatient.value = false\n    }\n\n    const viewCase = (case_) => {\n      console.log('Viewing case:', case_)\n      // Open detailed case view modal\n    }\n\n    const scheduleAppointment = (case_) => {\n      console.log('Scheduling appointment for:', case_)\n      emit('manage-appointments', {\n        action: 'schedule',\n        patient: case_\n      })\n    }\n\n    const recheckEligibility = async (case_) => {\n      console.log('Rechecking eligibility for:', case_)\n      // Re-run eligibility check\n      const response = await fetch('/api/medicaid/check', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          first: case_.name.split(' ')[0],\n          last: case_.name.split(' ')[1],\n          dob: case_.dob,\n          medicaidId: case_.medicaidId\n        })\n      })\n      \n      const result = await response.json()\n      \n      // Update case status\n      const caseIndex = activeCases.value.findIndex(c => c.id === case_.id)\n      if (caseIndex !== -1) {\n        activeCases.value[caseIndex].status = result.enrolled ? 'verified' : 'pending'\n        activeCases.value[caseIndex].lastUpdated = 'Just now'\n        activeCases.value[caseIndex].insurance = result.program || case_.insurance\n      }\n    }\n\n    return {\n      activeCases,\n      searchQuery,\n      statusFilter,\n      showAddPatient,\n      uploadedFile,\n      bulkProcessing,\n      quickCheck,\n      quickCheckLoading,\n      quickCheckResult,\n      newPatient,\n      verifiedCount,\n      pendingCount,\n      upcomingAppointments,\n      weeklyActivity,\n      filteredCases,\n      performQuickCheck,\n      addToCase,\n      handleFileUpload,\n      processBulkFile,\n      addNewPatient,\n      viewCase,\n      scheduleAppointment,\n      recheckEligibility\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* Case manager specific styling */\n.hover\\:bg-gray-50:hover {\n  background-color: rgba(249, 250, 251, 0.8);\n}\n\n/* File upload styling */\ninput[type=\"file\"] {\n  display: none;\n}\n\n/* Table styling */\ntable {\n  border-collapse: separate;\n  border-spacing: 0;\n}\n\ntable th:first-child {\n  border-top-left-radius: 0.5rem;\n}\n\ntable th:last-child {\n  border-top-right-radius: 0.5rem;\n}\n</style>